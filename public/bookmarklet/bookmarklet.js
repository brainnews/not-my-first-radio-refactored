javascript:(function(){const t={baseUrl:"https://notmyfirstradio.com",streamPatterns:[/\.mp3(\?.*)?$/i,/\.aac(\?.*)?$/i,/\.m3u8(\?.*)?$/i,/\.m3u(\?.*)?$/i,/\.pls(\?.*)?$/i,/\/stream(\?.*)?$/i,/\/live(\?.*)?$/i,/\/radio(\?.*)?$/i,/icecast/i,/shoutcast/i],excludeDomains:["youtube.com","youtu.be","spotify.com","soundcloud.com","apple.com","music.amazon.com","pandora.com","tidal.com"],maxStreams:10,uiTimeout:1e4},e={isStreamUrl:function(e){if(!e||"string"!=typeof e)return!1;try{const n=new URL(e);return!t.excludeDomains.some(t=>n.hostname.includes(t))&&t.streamPatterns.some(t=>t.test(e))}catch(t){return!1}},getDomain:function(t){try{return new URL(t).hostname}catch(t){return""}},cleanStationName:function(t){return t?t.trim().replace(/\s+/g," ").replace(/[^\w\s\-\.]/g,"").substring(0,100):""},getFaviconUrl:function(){const t=["link[rel=\"icon\"]",'link[rel="shortcut icon"]','link[rel="apple-touch-icon"]','link[rel="apple-touch-icon-precomposed"]'];for(let e of t){const t=document.querySelector(e);if(t&&t.href)return t.href}return window.location.origin+"/favicon.ico"},makeAbsolute:function(t){if(!t)return"";try{return new URL(t,window.location.href).href}catch(e){return t}}},n={findAudioStreams:function(){const t=[];return document.querySelectorAll("audio").forEach(n=>{n.src&&e.isStreamUrl(n.src)&&t.push({url:e.makeAbsolute(n.src),element:n,type:"audio-src"}),n.querySelectorAll("source").forEach(o=>{o.src&&e.isStreamUrl(o.src)&&t.push({url:e.makeAbsolute(o.src),element:n,type:"audio-source",mimeType:o.type})})}),t},findStreamingLinks:function(){const t=[];return document.querySelectorAll("a[href]").forEach(n=>{e.isStreamUrl(n.href)&&t.push({url:e.makeAbsolute(n.href),element:n,type:"link",linkText:n.textContent.trim()})}),t},findJavaScriptStreams:function(){const t=[];return["streamUrl","audioUrl","radioUrl","streamSrc","playlistUrl"].forEach(n=>{try{window[n]&&e.isStreamUrl(window[n])&&t.push({url:e.makeAbsolute(window[n]),type:"javascript-var",varName:n})}catch(t){}}),t},getAllStreams:function(){const t=[...this.findAudioStreams(),...this.findStreamingLinks(),...this.findJavaScriptStreams()],e=[],n=new Set;return t.forEach(t=>{n.has(t.url)||(n.add(t.url),e.push(t))}),e.slice(0,t.maxStreams)}},o={getStationName:function(){const t=[()=>{const t=document.querySelector('meta[property="og:title"]');return t?t.content:null},()=>document.title,()=>{const t=document.querySelector("h1");return t?t.textContent:null},()=>{const t=document.querySelector('meta[name="description"]');return t?t.content:null}];for(let n of t)try{const t=n();if(t&&t.trim())return e.cleanStationName(t)}catch(t){continue}return e.cleanStationName(e.getDomain(window.location.href))},getHomepage:function(){return window.location.origin},getCountryCode:function(){const t=document.documentElement.lang||document.documentElement.getAttribute("xml:lang");return t&&t.includes("-")?t.split("-")[1].toUpperCase():null}},r={showNotification:function(t,e="info"){const n=document.createElement("div");n.style.cssText=`position:fixed;top:20px;right:20px;background:${"error"===e?"#f44336":"success"===e?"#4caf50":"#2196f3"};color:white;padding:12px 20px;border-radius:4px;font-family:Arial,sans-serif;font-size:14px;z-index:999999;box-shadow:0 2px 8px rgba(0,0,0,0.2);max-width:300px;word-wrap:break-word;`,n.textContent=t,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},5e3)},showStreamSelection:function(n,o){const r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:999998;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif;";const c=document.createElement("div");c.style.cssText="background:white;border-radius:8px;padding:20px;max-width:500px;max-height:70vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,0.3);";const s=document.createElement("h3");s.textContent="Select Stream to Add",s.style.cssText="margin:0 0 15px 0;color:#333;",c.appendChild(s);const l=document.createElement("div");n.forEach((t,n)=>{const r=document.createElement("div");r.style.cssText="padding:10px;border:1px solid #ddd;border-radius:4px;margin-bottom:8px;cursor:pointer;transition:background 0.2s;",r.innerHTML=`<div style="font-weight:bold;margin-bottom:4px;">${e.getDomain(t.url)}</div><div style="font-size:12px;color:#666;word-break:break-all;">${t.url}</div><div style="font-size:11px;color:#999;margin-top:4px;">Type: ${t.type}</div>`,r.addEventListener("mouseenter",()=>{r.style.background="#f5f5f5"}),r.addEventListener("mouseleave",()=>{r.style.background="white"}),r.addEventListener("click",()=>{document.body.removeChild(r),o(t)}),l.appendChild(r)}),c.appendChild(l);const i=document.createElement("button");i.textContent="Cancel",i.style.cssText="background:#ccc;color:#333;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;margin-top:15px;",i.addEventListener("click",()=>{document.body.removeChild(r)}),c.appendChild(i),r.appendChild(c),document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},t.uiTimeout)}},c={createStationData:function(t){return{url:t.url,name:o.getStationName(),favicon:e.getFaviconUrl(),homepage:o.getHomepage(),countrycode:o.getCountryCode()}},generateAddUrl:function(e){return`${t.baseUrl}/?add=${encodeURIComponent(JSON.stringify(e))}`}};try{r.showNotification("Scanning page for audio streams...","info");const t=n.getAllStreams();if(0===t.length)return void r.showNotification("No audio streams found on this page","error");if(1===t.length){const e=c.createStationData(t[0]),n=c.generateAddUrl(e);return r.showNotification("Opening radio app with detected stream...","success"),void window.open(n,"_blank")}r.showStreamSelection(t,t=>{const e=c.createStationData(t),n=c.generateAddUrl(e);r.showNotification("Opening radio app with selected stream...","success"),window.open(n,"_blank")})}catch(t){console.error("Bookmarklet error:",t),r.showNotification("Error detecting streams: "+t.message,"error")}})();