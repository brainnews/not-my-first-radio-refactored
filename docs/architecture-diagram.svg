<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" style="background: white;">
  <defs>
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black" />
    </marker>
    
    <!-- Dotted line pattern -->
    <pattern id="dots" patternUnits="userSpaceOnUse" width="4" height="4">
      <circle cx="2" cy="2" r="1" fill="black" opacity="0.3"/>
    </pattern>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold">
    Not My First Radio - Architecture Overview
  </text>
  
  <!-- Event System (Central) -->
  <circle cx="600" cy="400" r="60" fill="none" stroke="black" stroke-width="2"/>
  <text x="600" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Event</text>
  <text x="600" y="408" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Manager</text>
  
  <!-- App.ts (Orchestrator) -->
  <rect x="520" y="100" width="160" height="60" fill="black" rx="5"/>
  <text x="600" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">App.ts</text>
  <text x="600" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Central Orchestrator</text>
  
  <!-- UI Layer -->
  <g id="ui-layer">
    <!-- Router -->
    <rect x="80" y="200" width="120" height="50" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="140" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Router</text>
    <text x="140" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Navigation</text>
    
    <!-- Navigation -->
    <rect x="220" y="200" width="120" height="50" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="280" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Navigation</text>
    <text x="280" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">UI Controls</text>
    
    <!-- Views -->
    <rect x="860" y="180" width="100" height="40" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="910" y="197" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">LibraryView</text>
    <text x="910" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Station List</text>
    
    <rect x="860" y="230" width="100" height="40" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="910" y="247" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">SearchView</text>
    <text x="910" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Discovery</text>
    
    <rect x="860" y="280" width="100" height="40" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="910" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">ProfileView</text>
    <text x="910" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Settings</text>
  </g>
  
  <!-- Core Modules -->
  <g id="core-modules">
    <!-- RadioPlayer -->
    <rect x="80" y="480" width="120" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
    <text x="140" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">RadioPlayer</text>
    <text x="140" y="518" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Audio Control</text>
    <text x="140" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">State Management</text>
    
    <!-- StationManager -->
    <rect x="220" y="480" width="120" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
    <text x="280" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">StationManager</text>
    <text x="280" y="513" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">CRUD Operations</text>
    <text x="280" y="526" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Preset System</text>
    
    <!-- SearchManager -->
    <rect x="360" y="480" width="120" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
    <text x="420" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">SearchManager</text>
    <text x="420" y="513" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">API Integration</text>
    <text x="420" y="526" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Preview System</text>
    
    <!-- UserManager -->
    <rect x="780" y="480" width="120" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
    <text x="840" y="500" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold">UserManager</text>
    <text x="840" y="513" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Profile Data</text>
    <text x="840" y="526" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Statistics</text>
    
    <!-- AchievementManager -->
    <rect x="920" y="480" width="120" height="60" fill="none" stroke="black" stroke-width="2" rx="5"/>
    <text x="980" y="495" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Achievement</text>
    <text x="980" y="507" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Manager</text>
    <text x="980" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Gamification</text>
    <text x="980" y="532" text-anchor="middle" font-family="Arial, sans-serif" font-size="9">Progress Tracking</text>
  </g>
  
  <!-- Utility Modules -->
  <g id="utility-modules">
    <!-- NotificationManager -->
    <rect x="80" y="300" width="120" height="50" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="140" y="318" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Notification</text>
    <text x="140" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Manager</text>
    <text x="140" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Toast Messages</text>
    
    <!-- ModalManager -->
    <rect x="220" y="300" width="120" height="50" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="280" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">ModalManager</text>
    <text x="280" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Dialog System</text>
    
    <!-- ProfileManager -->
    <rect x="780" y="300" width="120" height="50" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="840" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">ProfileManager</text>
    <text x="840" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Data Export/Import</text>
  </g>
  
  <!-- Service Layer -->
  <g id="services">
    <!-- Radio Browser API -->
    <rect x="100" y="620" width="140" height="50" fill="none" stroke="black" stroke-width="1" stroke-dasharray="5,5" rx="3"/>
    <text x="170" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Radio Browser API</text>
    <text x="170" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">External Service</text>
    
    <!-- MetadataExtractor -->
    <rect x="260" y="620" width="140" height="50" fill="none" stroke="black" stroke-width="1" stroke-dasharray="5,5" rx="3"/>
    <text x="330" y="635" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">MetadataExtractor</text>
    <text x="330" y="648" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Stream Analysis</text>
    <text x="330" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">ICY Headers</text>
    
    <!-- SharingService -->
    <rect x="420" y="620" width="140" height="50" fill="none" stroke="black" stroke-width="1" stroke-dasharray="5,5" rx="3"/>
    <text x="490" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">SharingService</text>
    <text x="490" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">URL Shortening</text>
    
    
    <!-- Storage -->
    <rect x="740" y="620" width="140" height="50" fill="none" stroke="black" stroke-width="1" stroke-dasharray="5,5" rx="3"/>
    <text x="810" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">LocalStorage</text>
    <text x="810" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="8">Persistence Layer</text>
  </g>
  
  <!-- Event Flow Arrows -->
  <!-- App to Event Manager -->
  <line x1="600" y1="160" x2="600" y2="340" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Event Manager to Core Modules -->
  <line x1="540" y1="400" x2="140" y2="480" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="560" y1="420" x2="280" y2="480" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="580" y1="440" x2="420" y2="480" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="640" y1="440" x2="840" y2="480" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="660" y1="420" x2="980" y2="480" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- Event Manager to Utility Modules -->
  <line x1="540" y1="380" x2="140" y2="350" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="560" y1="370" x2="280" y2="350" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="640" y1="370" x2="840" y2="350" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- Event Manager to Views -->
  <line x1="660" y1="380" x2="860" y2="200" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="660" y1="390" x2="860" y2="250" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="660" y1="400" x2="860" y2="300" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- Router to Event Manager -->
  <line x1="200" y1="225" x2="540" y2="380" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- Services to Core Modules (dotted lines) -->
  <line x1="170" y1="620" x2="420" y2="540" stroke="black" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  <line x1="330" y1="620" x2="420" y2="540" stroke="black" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  <line x1="490" y1="620" x2="280" y2="540" stroke="black" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  <line x1="650" y1="620" x2="280" y2="540" stroke="black" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  <line x1="810" y1="620" x2="840" y2="540" stroke="black" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  
  <!-- Layer Labels -->
  <text x="50" y="130" font-family="Arial, sans-serif" font-size="12" font-weight="bold" opacity="0.7">ORCHESTRATION</text>
  <text x="50" y="230" font-family="Arial, sans-serif" font-size="12" font-weight="bold" opacity="0.7">UI LAYER</text>
  <text x="50" y="330" font-family="Arial, sans-serif" font-size="12" font-weight="bold" opacity="0.7">UTILITIES</text>
  <text x="50" y="430" font-family="Arial, sans-serif" font-size="12" font-weight="bold" opacity="0.7">EVENTS</text>
  <text x="50" y="510" font-family="Arial, sans-serif" font-size="12" font-weight="bold" opacity="0.7">CORE MODULES</text>
  <text x="50" y="650" font-family="Arial, sans-serif" font-size="12" font-weight="bold" opacity="0.7">SERVICES</text>
  
  <!-- Legend -->
  <g id="legend" transform="translate(1020, 560)">
    <rect x="0" y="0" width="160" height="120" fill="none" stroke="black" stroke-width="1" rx="3"/>
    <text x="80" y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Legend</text>
    
    <!-- Solid line -->
    <line x1="10" y1="30" x2="40" y2="30" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="50" y="35" font-family="Arial, sans-serif" font-size="8">Event Flow</text>
    
    <!-- Dashed line -->
    <line x1="10" y1="50" x2="40" y2="50" stroke="black" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
    <text x="50" y="55" font-family="Arial, sans-serif" font-size="8">Service Integration</text>
    
    <!-- Module types -->
    <rect x="10" y="65" width="30" height="15" fill="black" rx="2"/>
    <text x="50" y="75" font-family="Arial, sans-serif" font-size="8">Orchestrator</text>
    
    <rect x="10" y="85" width="30" height="15" fill="none" stroke="black" stroke-width="2" rx="2"/>
    <text x="50" y="95" font-family="Arial, sans-serif" font-size="8">Core Module</text>
    
    <rect x="10" y="105" width="30" height="10" fill="none" stroke="black" stroke-width="1" rx="1"/>
    <text x="50" y="112" font-family="Arial, sans-serif" font-size="8">Utility/Service</text>
  </g>
  
  <!-- Architecture Principles -->
  <g id="principles" transform="translate(40, 50)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="10" font-weight="bold" opacity="0.8">Key Principles:</text>
    <text x="0" y="15" font-family="Arial, sans-serif" font-size="9" opacity="0.7">• Event-driven communication</text>
    <text x="0" y="28" font-family="Arial, sans-serif" font-size="9" opacity="0.7">• Modular architecture</text>
    <text x="0" y="41" font-family="Arial, sans-serif" font-size="9" opacity="0.7">• Separation of concerns</text>
  </g>
</svg>